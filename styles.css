:root{
  --bg:#f5f5f7;
  --fg:#121212;
  --paper:#ffffff;
  --ink:#0f0f12;
  --accent:#ff0055;
  --accent2:#00d4ff;
  --shadow: rgba(0,0,0,.35);
  --grid: rgba(0,0,0,.05);
  --panelBorder:#0c0c0c;
  --bubble:#ffffff;
  --muted: rgba(10,10,10,.72);

  --fontComic: "Bangers", system-ui;
  --fontTech: "Rajdhani", system-ui;

  --radius: 18px;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0b10;
    --fg:#f2f2f6;
    --paper:#12121a;
    --ink:#f2f2f6;
    --shadow: rgba(0,0,0,.6);
    --grid: rgba(255,255,255,.05);
    --panelBorder:#f2f2f6;
    --bubble:#12121a;
    --muted: rgba(242,242,246,.7);
  }
}

html[data-theme="dark"]{
  --bg:#0b0b10;
  --fg:#f2f2f6;
  --paper:#12121a;
  --ink:#f2f2f6;
  --shadow: rgba(0,0,0,.6);
  --grid: rgba(255,255,255,.05);
  --panelBorder:#f2f2f6;
  --bubble:#12121a;
  --muted: rgba(242,242,246,.7);
}
html[data-theme="light"]{
  --bg:#f5f5f7;
  --fg:#121212;
  --paper:#ffffff;
  --ink:#0f0f12;
  --shadow: rgba(0,0,0,.35);
  --grid: rgba(0,0,0,.05);
  --panelBorder:#0c0c0c;
  --bubble:#ffffff;
  --muted: rgba(10,10,10,.72);
}

*{ box-sizing:border-box; margin:0; padding:0; }
body{
  font-family: var(--fontTech);
  background: var(--bg);
  color: var(--fg);
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events:none;
  background:
    radial-gradient(var(--grid) 1px, transparent 1px) 0 0/18px 18px,
    radial-gradient(var(--grid) 1px, transparent 1px) 9px 9px/18px 18px;
  opacity:.6;
  mix-blend-mode: multiply;
  z-index: -2;
}
@media (prefers-color-scheme: dark){
  body::before{ mix-blend-mode: screen; opacity:.22; }
}

#fx-canvas{
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events:none;
}

.sr-only{
  position:absolute;
  width:1px;height:1px;
  padding:0;margin:-1px;
  overflow:hidden;clip:rect(0,0,0,0);
  white-space:nowrap;border:0;
}

.hidden{ display:none !important; }

/* ===================== SECURITY ===================== */
.security-overlay{
  position:fixed;
  inset:0;
  background: radial-gradient(1200px 700px at 50% 40%, rgba(255,0,85,.25), transparent 55%), #000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 9999;
  padding: 18px;
}
.login-box{
  width: min(420px, 100%);
  border: 2px solid var(--accent);
  background: rgba(10,10,14,.78);
  backdrop-filter: blur(10px);
  color: #fff;
  padding: 22px;
  box-shadow: 0 0 28px rgba(255,0,85,.45);
  border-radius: 18px;
}
.login-top{ display:flex; flex-direction:column; gap:8px; margin-bottom: 12px; }
.badge{
  font-family: var(--fontComic);
  font-size: 32px;
  letter-spacing: 2px;
  text-shadow: 2px 2px 0 rgba(0,0,0,.6);
}
.tiny{ opacity:.85; font-size: 13px; letter-spacing: .6px; }
.login-box input{
  width:100%;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.2);
  background: rgba(0,0,0,.35);
  color:#fff;
  font-size: 16px;
  outline:none;
}
.login-box input:focus{
  border-color: rgba(0,212,255,.55);
  box-shadow: 0 0 0 3px rgba(0,212,255,.18);
}
.login-box button{
  width:100%;
  margin-top: 10px;
  padding: 12px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(90deg, var(--accent), rgba(0,212,255,.9));
  color: #fff;
  font-weight: 700;
  cursor:pointer;
  letter-spacing: .6px;
}
.error-msg{ display:none; margin-top: 10px; color:#ff4d4d; font-weight: 700; }
.hint{ margin-top: 10px; font-size: 12px; opacity:.8; }

/* ===================== OPENING ===================== */
.opening{
  position: fixed;
  inset:0;
  z-index: 5000;
  background:
    radial-gradient(900px 600px at 50% 40%, rgba(0,212,255,.20), transparent 60%),
    radial-gradient(900px 600px at 50% 60%, rgba(255,0,85,.18), transparent 60%),
    #000;
  color:#fff;
  overflow:hidden;
}
.opening-center{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 10px;
  text-align:center;
  padding: 24px;
  z-index:2;
}
.opening-chapter{ font-weight: 700; letter-spacing: 3px; opacity:.85; }
.opening-title{
  font-family: var(--fontComic);
  font-size: clamp(42px, 7vw, 92px);
  letter-spacing: 3px;
  text-shadow: 3px 3px 0 rgba(255,0,85,.85);
  transform: translateY(20px);
  opacity:0;
  animation: popIn .55s ease forwards .25s;
}
.opening-sub{ opacity:0; transform: translateY(10px); animation: fadeUp .55s ease forwards .5s; }
@keyframes popIn{ to { opacity:1; transform: translateY(0); } }
@keyframes fadeUp{ to { opacity:.95; transform: translateY(0); } }

.opening-bars{
  position:absolute;
  inset:-40%;
  background: repeating-linear-gradient(62deg, transparent 0 22px, rgba(255,255,255,.06) 22px 44px);
  animation: barsMove 1.2s linear infinite;
  opacity:.55;
  z-index:1;
}
@keyframes barsMove{ to { transform: translateY(-140px); } }

.opening-flash{
  position:absolute;
  inset:0;
  background: white;
  opacity:0;
  z-index:3;
  animation: flash 2.2s ease forwards;
}
@keyframes flash{
  0%, 64% { opacity:0; }
  70% { opacity:.85; }
  78% { opacity:0; }
  100% { opacity:0; }
}

.opening-skip{
  position:absolute;
  top: 12px;
  right: 12px;
  z-index:4;
}
.btn-ghost{
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.22);
  color:#fff;
  padding: 10px 12px;
  border-radius: 999px;
  cursor:pointer;
  backdrop-filter: blur(10px);
}
.btn-ghost:hover{ background: rgba(255,255,255,.14); }

.opening.play-exit{ animation: openingExit .75s ease forwards; }
@keyframes openingExit{ 0% { opacity:1; } 100% { opacity:0; visibility:hidden; } }

/* ===================== HERO ===================== */
.hero{
  min-height: 86vh;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
  padding: 28px 14px 18px;
}
.hero-inner{
  width:min(980px, 100%);
  background: color-mix(in srgb, var(--paper) 92%, transparent);
  border: 5px solid var(--panelBorder);
  box-shadow: 12px 12px 0 var(--shadow);
  border-radius: 22px;
  padding: clamp(16px, 4vw, 30px);
  position:relative;
  z-index:2;
}
.hero-inner::before{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: 18px;
  background:
    radial-gradient(circle at 25% 30%, rgba(255,0,85,.08), transparent 35%),
    radial-gradient(circle at 70% 55%, rgba(0,212,255,.08), transparent 45%);
  pointer-events:none;
}
.hero-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 12px;
  margin-bottom: 10px;
}
.chapter{
  font-weight:700;
  letter-spacing:1px;
  padding: 7px 12px;
  border-radius: 999px;
  border: 2px solid var(--panelBorder);
  background: var(--ink);
  color: color-mix(in srgb, var(--paper) 95%, #fff);
}
.toggles{ display:flex; gap: 10px; }
.chip{
  border: 2px solid var(--panelBorder);
  background: var(--paper);
  color: var(--fg);
  border-radius: 999px;
  padding: 10px 12px; /* más táctil en móvil */
  cursor:pointer;
  box-shadow: 6px 6px 0 var(--shadow);
}
.chip:active{ transform: translate(1px, 1px); box-shadow: 4px 4px 0 var(--shadow); }

.hero h1{
  font-family: var(--fontComic);
  font-size: clamp(40px, 7vw, 84px);
  letter-spacing: 2px;
  text-shadow: 3px 3px 0 var(--accent);
  line-height: .95;
}
.subtitle{ margin-top: 8px; opacity:.88; }
.hero-tip{ margin-top: 14px; color: var(--muted); font-size: 14px; }

.scroll-indicator{
  width: 34px;
  height: 52px;
  border: 2px solid var(--panelBorder);
  border-radius: 999px;
  margin-top: 22px;
  position:relative;
}
.scroll-indicator::after{
  content:"";
  width: 7px; height: 7px;
  background: var(--panelBorder);
  border-radius: 50%;
  position:absolute;
  left:50%;
  top: 12px;
  transform: translateX(-50%);
  animation: scrollDot 1.4s ease infinite;
}
@keyframes scrollDot{
  0%{ opacity:1; transform: translate(-50%, 0); }
  80%{ opacity:0; transform: translate(-50%, 18px); }
  100%{ opacity:0; }
}

.speedlines{
  position:absolute;
  inset:-50%;
  background: repeating-linear-gradient(
    62deg,
    transparent 0 16px,
    color-mix(in srgb, var(--ink) 10%, transparent) 16px 32px
  );
  opacity:.18;
  animation: speedMove 12s linear infinite;
  z-index:1;
}
@keyframes speedMove{ to { transform: translateY(-240px); } }

/* ===================== COMIC (VERTICAL) ===================== */
.comic-vertical{
  width:min(920px, 100%);
  margin: 0 auto;
  padding: 26px 12px 80px;
  display:flex;
  flex-direction:column;
  gap: 78px; /* móvil más compacto */
}

/* Panel reveal */
.panel{
  position:relative;
  opacity:0;
  transform: translateY(52px) scale(.985);
  transition: opacity .7s ease, transform .85s cubic-bezier(.2,1,.2,1);
  will-change: transform, opacity;
}
.panel.visible{
  opacity:1;
  transform: translateY(0) scale(1);
}

/* Comic frame */
.panel-frame{
  background: var(--paper);
  border: 5px solid var(--panelBorder);
  box-shadow: 11px 11px 0 var(--shadow);
  overflow:hidden;
  position:relative;
  transform: rotate(var(--tilt, 0deg));
}

/* “ink” irregular feel */
.panel-frame::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(color-mix(in srgb, var(--ink) 8%, transparent) 1px, transparent 1px) 0 0/14px 14px;
  opacity:.14;
  mix-blend-mode: multiply;
}
@media (prefers-color-scheme: dark){
  .panel-frame::after{ mix-blend-mode: screen; opacity:.10; }
}

/* Image */
.panel img{
  width:100%;
  display:block;
  filter: grayscale(10%) contrast(112%);
  transform: translateZ(0);
  transition: filter .25s ease, transform .25s ease;
}
.panel:active img{ transform: scale(1.01); }
.panel:hover img{ filter: grayscale(0%) contrast(106%); transform: scale(1.01); }

/* Irregular shapes (varies per panel) */
.shape-0 .panel-frame{
  border-radius: 22px 14px 24px 12px;
  clip-path: polygon(2% 1%, 98% 0%, 100% 92%, 95% 100%, 0% 98%, 0% 8%);
}
.shape-1 .panel-frame{
  border-radius: 12px 26px 16px 24px;
  clip-path: polygon(0% 6%, 96% 0%, 100% 12%, 98% 100%, 8% 98%, 0% 90%);
}
.shape-2 .panel-frame{
  border-radius: 28px 18px 18px 26px;
  clip-path: polygon(4% 0%, 100% 4%, 96% 100%, 0% 96%);
}
.shape-3 .panel-frame{
  border-radius: 18px 18px 30px 14px;
  clip-path: polygon(0% 0%, 100% 2%, 98% 82%, 100% 100%, 0% 98%, 2% 18%);
}
.shape-4 .panel-frame{
  border-radius: 26px 14px 26px 14px;
  clip-path: polygon(2% 2%, 98% 0%, 100% 100%, 0% 98%);
}

/* Text bubble: now mobile-friendly (below/overlap less) */
.bubble{
  margin-top: 10px;
  background: var(--bubble);
  color: var(--fg);
  border: 4px solid var(--panelBorder);
  border-radius: 18px;
  padding: 12px 12px 10px;
  font-family: var(--fontComic);
  letter-spacing: 1px;
  font-size: clamp(16px, 4.5vw, 22px);
  box-shadow: 7px 7px 0 color-mix(in srgb, var(--accent) 70%, var(--shadow));
  text-transform: uppercase;
}

.desc{
  margin-top: 8px;
  padding-left: 6px;
  color: var(--muted);
  font-size: 14px;
}

/* Optional little “stamp” tag */
.stamp{
  position:absolute;
  top: 12px;
  left: 12px;
  z-index:2;
  background: color-mix(in srgb, var(--paper) 90%, transparent);
  border: 2px solid var(--panelBorder);
  border-radius: 999px;
  padding: 6px 10px;
  font-weight:700;
  font-size: 12px;
  box-shadow: 6px 6px 0 var(--shadow);
}

/* ===================== COMIC (HORIZONTAL PAGES) ===================== */
.comic-horizontal{
  width: 100%;
  padding: 10px 0 80px;
}

/* sticky-ish hud for mobile */
.hud{
  width: min(980px, 100%);
  margin: 0 auto 10px;
  padding: 0 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  position: sticky;
  top: 10px;
  z-index: 50;
}
.hud-btn{
  border: 2px solid var(--panelBorder);
  background: var(--paper);
  color: var(--fg);
  border-radius: 14px;
  padding: 12px 14px; /* más táctil */
  cursor:pointer;
  box-shadow: 8px 8px 0 var(--shadow);
  font-weight: 800;
  min-width: 54px;
}
.hud-btn:active{ transform: translate(1px,1px); box-shadow: 6px 6px 0 var(--shadow); }
.hud-mid{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 2px;
  color: var(--muted);
}
.hud-hint{ font-size: 12px; opacity:.9; }

.h-strip{
  width: 100%;
  display:flex;
  gap: 14px;
  padding: 0 12px;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.h-strip::-webkit-scrollbar{ display:none; }

.page{
  flex: 0 0 92vw;  /* más móvil */
  max-width: 980px;
  scroll-snap-align: center;
  padding: 10px 0 14px;
}

.page .panel{ opacity:1; transform:none; } /* en modo páginas no hacemos reveal */
.page .panel-frame{ box-shadow: 10px 10px 0 var(--shadow); }

/* En pages: descripción abajo siempre visible */
.page .bubble{ font-size: clamp(16px, 4.5vw, 22px); }
.page .desc{ font-size: 13px; }

/* ===================== FOOTER ===================== */
.footer{
  background: var(--ink);
  color: color-mix(in srgb, var(--paper) 92%, #fff);
  text-align:center;
  padding: 46px 14px;
  font-family: var(--fontComic);
  font-size: clamp(26px, 5vw, 44px);
  letter-spacing: 2px;
}

/* Tablet+ */
@media (min-width: 820px){
  .comic-vertical{ gap: 110px; padding-top: 40px; }
  .page{ flex-basis: min(92vw, 980px); }
}
